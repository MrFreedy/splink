<p class="text-center font-bold text-white text-3xl">Bonjour {{username}} üëã,</p>
<div class="p-8 grid grid-cols-1 lg:grid-cols-2 gap-8 w-7xl mx-auto items-stretch">
        <!-- Derni√®res d√©penses -->
    <div class="bg-[var(--color-card)] p-6 rounded-xl shadow w-full h-fit">
        <h2 class="text-center text-3xl font-bold text-[var(--color-green-secondary)] mb-4">Derni√®res d√©penses</h2>
  
        <div class="space-y-3">
            <ng-container *ngIf="depenses.length > 0; else noDepenses">
                <ng-container *ngFor="let depense of depenses">
                <app-depense-item
                    [icon]="getIcon(depense.category)"
                    [label]="depense.title"
                    [amount]="formatAmount(depense.amount)">
                </app-depense-item>
                </ng-container>
            </ng-container>
            
            <ng-template #noDepenses>
                <p class="text-center text-[var(--color-green-secondary)] font-bold text-xl mt-4">Aucune d√©pense pour l'instant.</p>
            </ng-template>
        </div>
  
        <div class="flex justify-center mt-4 gap-20">
            <button (click)="openModal()" class="btn flex items-center space-x-2 p-5 group">
                <img src="icons/add/add-normal.png" class="h-10 w-10 group-hover:hidden">
                <img src="icons/add/add-hover.png" class="h-10 w-10 hidden group-hover:block">
                <span>Ajouter</span>
            </button>
            <button class="btn flex items-center space-x-2 p-5 group">
                <img src="icons/view/view-normal.png" class="h-10 w-10 group-hover:hidden">
                <img src="icons/view/view-hover.png" class="h-10 w-10 hidden group-hover:block">
                <span>Consulter</span>
            </button>
        </div>
    </div>

    <!-- La modale -->
    <div *ngIf="isModalOpen" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50" (click)="closeModal()">
        <div class="bg-[var(--color-card)] p-6 rounded-xl shadow-lg relative w-full max-w-4xl" (click)="$event.stopPropagation()">
            <h2 class="text-[var(--color-green-secondary)] text-center text-2xl font-bold mb-6">Ajouter une d√©pense</h2>
        
            <form (ngSubmit)="submitDepense()" #depenseForm="ngForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Titre -->
                <div>
                    <label class="block text-xl font-bold mb-2 text-[var(--color-green-secondary)]">Titre</label>
                    <input name="title" [(ngModel)]="depensesToSubmit.title" class="w-full p-2 rounded-xl" required />
                </div>
                  
            
                <!-- Montant -->
                <div>
                    <label class="block text-xl font-bold mb-2 text-[var(--color-green-secondary)]">Montant en ‚Ç¨</label>
                    <input type="number" name="amount" [(ngModel)]="depensesToSubmit.amount" class="w-full p-2 rounded-xl" required />
                </div>
            
                <!-- Cat√©gorie -->
                <div>
                    <label class="block text-xl font-bold mb-2 text-[var(--color-green-secondary)]">Cat√©gorie</label>
                    <select name="category" [(ngModel)]="depensesToSubmit.category" class="w-full p-2 rounded-xl bg-white" required>
                        <option value="food">Alimentation</option>
                        <option value="transport">Transport</option>
                        <option value="entertainment">Loisirs</option>
                        <option value="bills">Factures</option>
                    </select>
                </div>                  
            
                <!-- Date de paiement-->
                <div>
                    <label for="paymentDate" class="block text-xl font-bold mb-2 text-[var(--color-green-secondary)]">Date de paiement</label>
                    <input type="date" id="paymentDate" name="paymentDate" [(ngModel)]="depensesToSubmit.paymentDate" class="w-full p-2 rounded-xl bg-white text-black" required />
                </div>
                
                <!-- Payer par -->
                <div>
                    <label class="block text-xl font-bold mb-2 text-[var(--color-green-secondary)]">Payer par</label>
                    <select name="payer" [(ngModel)]="depensesToSubmit.payer" class="w-full p-2 rounded-xl bg-white text-black" required>
                        <option *ngFor="let name of participantNames" [value]="name">{{ name }}</option>
                    </select>
                </div>                  
    
                <!-- R√©partition -->
                <div>
                    <label class="block text-xl font-bold mb-2 text-[var(--color-green-secondary)]">R√©partir avec</label>
                    <div class="space-y-2">
                      <div *ngFor="let name of participantNames" class="flex items-center space-x-4">
                        <label class="flex items-center space-x-3 cursor-pointer">
                          <input 
                            type="checkbox" 
                            [(ngModel)]="participants[name]" 
                            [name]="name" 
                            class="hidden peer"
                          />
                          <div class="w-7 h-7 rounded-lg border-4 border-[var(--color-green-secondary)] peer-checked:bg-[var(--color-green-primary)] transition"></div>
                          <span class="text-lg text-[var(--color-green-secondary)] capitalize">{{ name }}</span>
                        </label>
                      </div>
                    </div>
                </div> 
                <div class="flex justify-center mt-6 gap-4">
                    <button type="submit" class="btn flex items-center space-x-2 p-5 group">
                        <img src="icons/add/add-normal.png" class="h-10 w-10 group-hover:hidden">
                        <img src="icons/add/add-hover.png" class="h-10 w-10 hidden group-hover:block">
                        <span>Ajouter</span>
                    </button>
                    <button type="button" (click)="closeModal()" class="btn flex items-center space-x-2 p-5 group">
                        <img src="icons/cancel/cancel-normal.png" class="h-10 w-10 group-hover:hidden">
                        <img src="icons/cancel/cancel-hover.png" class="h-10 w-10 hidden group-hover:block">
                        <span>Annuler</span>
                    </button>
                </div>                 
            </form>
        </div>
    </div>
      
  
    <!-- Mes t√¢ches du jour -->
    <div class="bg-[var(--color-card)] p-6 rounded-xl shadow w-full h-fit">
        <h2 class="text-center text-3xl font-bold text-[var(--color-green-secondary)] mb-4">Mes t√¢ches du jour</h2>
        <app-task-item icon="icons/cleaning/cleaning-normal.png" label="Passer l'aspirateur"></app-task-item>
        <app-task-item icon="icons/trash/trash-normal.png" label="Sortir les poubelles"></app-task-item>
        <div class="flex justify-center mt-4 gap-20">
            <button class="btn flex items-center space-x-2 p-5 group">
                <img src="icons/add/add-normal.png" class="h-10 w-10 group-hover:hidden">
                <img src="icons/add/add-hover.png" class="h-10 w-10 hidden group-hover:block">
                <span>Ajouter</span>
            </button>
            <button class="btn flex items-center space-x-2 p-5 group">
                <img src="icons/view/view-normal.png" class="h-10 w-10 group-hover:hidden">
                <img src="icons/view/view-hover.png" class="h-10 w-10 hidden group-hover:block">
                <span>Consulter</span>
            </button>
        </div>
    </div>
  
    <!-- T√¢ches √† venir -->
    <div class="bg-[var(--color-card)] p-6 rounded-xl shadow w-full lg:col-span-2 h-fit">
        <h2 class="text-3xl font-bold text-[var(--color-green-secondary)] mb-4 text-center">T√¢ches √† venir</h2>
        <div class="flex flex-wrap justify-center gap-4">
            <app-incoming-task-item icon="icons/cleaning/cleaning-normal.png" label="Passer l'aspirateur" date="Lundi 05 f√©vrier"></app-incoming-task-item>
            <app-incoming-task-item icon="icons/cleaning/cleaning-normal.png" label="Passer l'aspirateur" date="Lundi 05 f√©vrier"></app-incoming-task-item>
            <app-incoming-task-item icon="icons/cleaning/cleaning-normal.png" label="Passer l'aspirateur" date="Lundi 05 f√©vrier"></app-incoming-task-item>
        </div>

        <div class="flex justify-center mt-4">
            <button class="btn flex items-center space-x-2 p-5 group">
                <img src="icons/more/more-normal.png" class="h-10 w-10 group-hover:hidden">
                <img src="icons/more/more-hover.png" class="h-10 w-10 hidden group-hover:block">
                <span>Voir plus</span>
            </button>
        </div>
    </div>
</div>